# 分页表单功能指南

## 概述

在个案管理页面中，我们实现了分页表单功能，将原来的单页表单内容整合到分页表单的第一页中，提供更好的用户体验。

## 功能特点

### 1. 分页表单结构
- **第一页：完整表单** - 包含所有原有的表单字段
- **第二页：身份信息** - 身份证字号、电话
- **第三页：地址信息** - 城市、地区、详细地址
- **第四页：联络信息** - Email
- **第五页：困难类型** - 个案困难类型
- **第六页：照片上传** - 个人照片（可选）

### 2. 第一页完整表单包含
- 照片上传功能
- 个人基本资讯（姓名、性别、生日）
- 身份信息（身份证字号、电话）
- 地址信息（城市、地区、详细地址）
- 联络信息（Email）
- 困难类型选择

### 3. 分页表单的优势

1. **用户体验更好**：第一页提供完整的表单，后续页面提供分步验证
2. **进度可视化**：通过横向Stepper显示当前进度
3. **分步验证**：每个步骤都有独立的验证逻辑
4. **导航灵活**：可以前进、后退，也可以直接点击步骤跳转
5. **保留原有功能**：第一页完全保留了原有的单页表单功能

## 使用方法

1. 进入个案管理页面
2. 点击"新增个案"分页
3. 系统会自动显示分页表单
4. 第一页包含所有基本字段，可以直接填写完整信息
5. 或者按照步骤逐步填写

## 技术实现

### 组件结构
```
AddCaseTab.tsx (主组件)
└── AddCaseStepperForm.tsx (分页表单组件)
    └── Stepper.tsx (分页导航组件)
```

### 核心组件
- `Stepper.tsx`：通用的分页导航组件
- `AddCaseStepperForm.tsx`：分页表单实现
- 简化的 `AddCaseTab.tsx`：只负责渲染分页表单

### 状态管理
- `activeStep`：分页表单的当前步骤
- 表单数据状态在6个步骤间共享
- 每个步骤都有独立的验证逻辑

## 样式特点

- 使用Material-UI的Stepper组件
- 响应式设计，支持移动端
- 与现有主题色彩保持一致
- 步骤指示器使用绿色主题色
- 第一页使用Box布局替代Grid，确保兼容性

## 验证逻辑

每个步骤都有独立的验证：
- **第一页**：所有字段的完整验证
- **第二页**：身份证字号、电话必填
- **第三页**：城市、地区、地址必填
- **第四页**：Email必填
- **第五页**：困难类型必填
- **第六页**：照片上传可选

只有当前步骤验证通过才能进入下一步。

## 兼容性

- 完全向后兼容，API调用逻辑相同
- 表单数据格式保持一致
- 移除了Grid组件的依赖，使用Box布局确保兼容性
- 支持所有原有的表单验证规则

## 更新说明

### 最新变更
1. **简化AddCaseTab**：移除了模式切换，直接使用分页表单
2. **第一页整合**：将原有的单页表单内容整合到第一页
3. **布局优化**：使用Box组件替代Grid，提高兼容性
4. **API调用修复**：确保数据格式与后端API匹配

### 技术改进
- 移除了不必要的Grid组件依赖
- 优化了响应式布局
- 简化了组件结构
- 提高了代码可维护性 